<vertical-section-layout section-title="Properties" on-save-edit="vm.onSave()" on-edit="vm.onEdit()" on-cancel-edit="vm.onCancelEdit()" allow-edit="vm.model.state == 'ENABLED'"
                         editable="vm.editableSection" keep-editable-after-save="true">

    <readonly-section>
        <div layout="column">
            <div layout="row" class="layout-padding-top-bottom">
                <span flex="25" class="property-name">Data Owner</span>

                <div flex>
                    {{vm.model.dataOwner}}
                </div>
            </div>
            <div layout="row" class="layout-padding-top-bottom">
                <span flex="25" class="property-name">Tags</span>

                <div flex>
                    {{vm.model.tags | join: ',':'name'}}
                </div>
            </div>
            <div layout="row" ng-repeat="property in vm.userPropertyList" class="layout-padding-top-bottom">
                <span flex="25" class="property-name">{{property.key}}</span>

                <div flex>
                    {{property.value}}
                </div>
            </div>
        </div>
    </readonly-section>

    <editable-section>
        <md-input-container class="md-block" flex-gt-sm>
            <label>Data Owner</label>
            <input ng-model="vm.editModel.dataOwner">
        </md-input-container>

        <md-input-container class="md-block layout-padding-top-bottom flex-gt-sm" flex-gt-sm="" style="">
            <label class="label-small md-container-ignore">Tags</label>
            <md-chips ng-model="vm.editModel.tags" md-autocomplete-snap md-transform-chip="vm.transformChip($chip)" md-require-match="false">
                <md-autocomplete md-selected-item="vm.tagChips.selectedItem" md-search-text="vm.tagChips.searchText" md-items="item in vm.feedTagService.querySearch(vm.tagChips.searchText)"
                        md-item-text="item.name" placeholder="Add a Tag">
                    <span md-highlight-text="vm.tagChips.searchText">{{item.name}}</span>
                </md-autocomplete>
                <md-chip-template>
                    <span>
                        <strong>{{$chip.name}}</strong>
                    </span>
                </md-chip-template>
            </md-chips>
        </md-input-container>

        <div class="feed-user-property" layout="row" ng-repeat="property in vm.userPropertyList">
            <md-input-container flex="50">
                <label>Property</label>
                <input ng-change="vm.updateUserProperties()" ng-model="property.key">
                <div ng-messages="property.$error" md-auto-hide="false">
                    <div ng-message="duplicate">Properties must be unique.</div>
                </div>
            </md-input-container>
            <md-input-container flex="50">
                <label>Value</label>
                <input ng-change="vm.updateUserProperties()" ng-model="property.value">
            </md-input-container>
            <md-button class="md-icon-button" aria-label="Delete" ng-click="vm.deleteProperty($index)">
                <md-icon>close</md-icon>
            </md-button>
        </div>

        <md-button class="md-raised" ng-click="vm.addProperty()">New Property</md-button>
    </editable-section>
</vertical-section-layout>
