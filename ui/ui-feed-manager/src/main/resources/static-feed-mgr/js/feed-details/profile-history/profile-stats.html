<div>
    <div ng-if="vm.loading">
        <md-progress-linear md-mode="indeterminate"></md-progress-linear>
        <span flex>Loading...</span>
    </div>
    <div layout="row" flex="100">

        <div ng-if="!vm.loading" flex="20">
            <div class="layout-padding-left">
                <md-input-container>
                    <label>Filter</label>
                    <input ng-model="vm.profileFilter"/>
                </md-input-container>
            </div>

            <md-list class="list-item-table registered-templates">
                <md-list-item class="md-secondary"
                              dir-paginate="row in vm.data.rows | unique:'columnname' | orderBy:['columnname'] | filter:vm.profileFilter | itemsPerPage:vm.rowsPerPage"
                              pagination-id="profile_stats_0">
                    <div layout="row" layout-fill>
                        <div flex="100" layout="column" class="item-column md-list-item-text " title="{{row}}"
                             ng-click="vm.selectRowAndUpdateCharts($event, row)">
                                     <span class="item-title" title="{{row}}">
                                     {{::row['columnname']}}
                                     </span>
                        </div>
                    </div>
                    <md-divider ng-if="!$last"></md-divider>
                </md-list-item>
                <md-list-item ng-show="vm.loading == false && vm.data.length ==0">
                    No results found
                </md-list-item>
            </md-list>
        </div>
        <div ng-if="!vm.loading" flex="80" class="layout-padding-left profile">
            <div layout="column">
                <header-section flex="100">
                    <h2 class="md-title">{{vm.selectedRow.columnname}} <span ng-show="vm.selectedRow.columnname != '(ALL)'" class="md-caption">({{vm.selectedRow.type}})</span></h2>
                </header-section>

                <div ng-if="vm.selectedRow.columnname == '(ALL)'" layout="row" flex="100">
                    <div layout="column" flex="33" class="summary">
                        <div flex="100" class="bars" >
                            <h3 class="md-subhead">Summary</h3>
                            <nvd3 flex options="vm.summaryOptions" data="vm.summaryData" api="vm.summaryApi"></nvd3>
                        </div>
                    </div>
                </div>

                <div ng-if="vm.selectedRow.columnname != '(ALL)'" layout="row" flex="100">
                    <div layout="column" flex="33" class="summary">
                        <div flex="100" class="bars" >
                            <h3 class="md-subhead">Summary</h3>
                            <nvd3 flex options="vm.summaryOptions" data="vm.summaryData" api="vm.summaryApi"></nvd3>
                        </div>
                        <!--<div flex="100" class="mismatched-values">-->
                            <!--<h3 class="md-subhead">Mismatched Values</h3>-->

                        <!--</div>-->
                        <!--<div flex="100" class="length-outliers">-->
                            <!--<h3 class="md-subhead">String Length Outliers</h3>-->

                        <!--</div>-->
                    </div>
                    <div layout="column" flex="33" class="length-stats">
                        <div flex="100" class="string-length-stats">
                            <div ng-if="vm.selectedRow.profile == 'String'" class="md-subhead">
                                String Length Statistics
                            </div>
                            <div ng-if="vm.selectedRow.profile == 'Numeric'" class="md-subhead">
                                Number Statistics
                            </div>
                            <div ng-if="vm.selectedRow.profile == 'Time'" class="md-subhead">
                                Time Statistics
                            </div>
                            <nvd3 flex options="vm.statOptions" data="vm.statData" api="vm.statApi"></nvd3>
                        </div>
                    </div>
                    <div layout="column" flex="33" class="top-value">
                        <h3 class="md-subhead">Top Values</h3>
                        <md-list class="list-item-table">
                            <md-list-item class="md-secondary"
                                          dir-paginate="row in vm.topvalues | itemsPerPage: 10"
                                          pagination-id="profile_stats_1">
                                <div layout="row" layout-fill>
                                    <div flex="90" class="item-column md-list-item-text">
                                        <span class="item-title">
                                        {{::row['value']}}
                                        </span>
                                    </div>
                                    <div flex="10" class="item-column md-list-item-text">
                                        <span class="item-title">
                                        {{::row['count']}}
                                        </span>
                                    </div>
                                </div>
                                <md-divider ng-if="!$last"></md-divider>
                            </md-list-item>
                            <md-list-item ng-show="vm.loading == false && vm.topvalues.length == 0">
                                No results found
                            </md-list-item>
                        </md-list>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div flex="initial">

        <table class="hive-table" style="width:100%">
            <thead>
            <tr>
                <th>
                    Column
                </th>
                <th>
                    Metric
                </th>
                <th>
                    Value
                </th>
            </tr>
            </thead>
            <tbody>
            <tr dir-paginate="row in vm.data.rows |filter:vm.profileFilter  |orderBy:['columnname','metrictype']|itemsPerPage:vm.rowsPerPage"
                pagination-id="profile_stats_0">
                <td>
                    {{::row['columnname']}}
                </td>
                <td>
                    {{::row['metrictype']}}
                </td>
                <td>
                    <span style="white-space:pre-wrap;"> {{::row['metricvalue']}}</span>
                </td>
            </tr>
            </tbody>
        </table>
        </table>
    </div>

</div>