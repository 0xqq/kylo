<div ng-controller="ImportTemplateController as vm">

<card-layout  header-css="filter-header" class="centered">

    <header-section >
        <div layout="row" layout-align="center start">
            <h2 class="md-title">Import a Template</h2>
            <span flex></span>
            <ng-md-icon icon="file_upload" style="fill:#F08C38;padding-right:16px;" size="30"></ng-md-icon>
        </div>
    </header-section>


    <body-section>





        <div layout="column" flex class="md-padding">
            <div>
                <div class="md-subhead">Import a Nifi (xml) template or Pipeline Controller template (zip) to import.</div>
                <div>Importing a Nifi Template will validate and import the template into Nifi.<br/>
                Importing a Pipeline Controller template will import into Nifi and additionally Register the template into Pipeline Controller.
                    </div>
            </div>
            <div  layout="column" layout-align="start center" style="padding-top:15px;">
                    <upload-file upload-file-model="vm.templateFile"></upload-file>
                <md-input-container class="condensed-no-float">
                    <md-checkbox ng-model="vm.overwrite" aria-label="Overwrite if exists" >
                        Overwrite
                    </md-checkbox>
                    <div class="hint">
                        If template already exists it will be replaced.
                    </div>
                </md-input-container>
                <span style="padding-top:10px">
                <md-button class="md-raised" ng-click="vm.importTemplate();" ng-if="vm.templateFile != null" ng-disabled="vm.importBtnDisabled">
                    Import Template
                </md-button>
                    </span>
            </div>


            <div ng-if="vm.importResult != null" class="md-padding">
                <div layout="row">
                    <ng-md-icon icon="{{vm.importResultIcon}}" style="fill:{{vm.importResultIconColor}}"></ng-md-icon>
                    <span style="padding-left:15px;">{{vm.message}}</span>
                    <span flex></span>
                </div>
                <md-list class="padding-left" ng-repeat="(severity,errors)  in vm.errorMap">
                    <md-subheader class="md-warn" ng-if="errors.length >0">{{::severity}} errors</md-subheader>
                    <md-list-item class="md-2-line" ng-repeat="error in errors track by $index" >
                        <div class="md-list-item-text" >
                            <div ng-if="error.processorName != null && error.processorName != '' " style="color:grey">Processor: {{::error.processorName}}</div>
                            <div class="md-warn-text">{{::error.message}}</div>
                        </div>
                        <md-divider ng-if="!$last"></md-divider>
                    </md-list-item>
                </md-list>
            </div>
        </div>
    </body-section>
</card-layout>
    </div>