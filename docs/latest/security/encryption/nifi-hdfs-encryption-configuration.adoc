= Configure Nifi for HDFS Encryption
Think Big Analytics
June 2016

:toc:
:toclevels: 2
:toc-title: Contents

== Key Creation Process

* Log in to Ranger KMS UI.

    <Hostname>:6080

image::images/E1.png[]

* Provide username as 'keyadmin' and password for user.

* Go to Encryption tab and Select Key Manager.

image::images/E2.png[]

* Select appropriate defined service from list.

image::images/E3.png[]

* Click on Add New Key

* Fill out details required for Key.

image::images/E4.png[]

* Click on save.

Now Key has been successfull got created which can be used for creating encryption zone.

== Permission definition :

Now next task is provide necessary permission to user who will run nifi application. In our case we are using nifi user for running application and hdfs as 
super user operation.


* Click on Service.

image::images/E5.png[]

* Click on edit icon present at right side.

image::images/E5.5.png[]

* Go to bottom of page , you will see User and Group Permissions' tab.

image::images/E6.png[]

* Provide appropriate permission to nifi user.



== Configure CreateHDFSFolder Processor

* Right Click on processor and select configure.

* Configure highlighted property for processor.

      Directory To Be Encrypted : /model.db/${source}
                                  /app/warehouse/${source}
                                  /etl/${source}
                                  /archive/${source}
     Encryption Key : nifikey
     Encryption Required : Y

image::images/E7.png[]

* Click on Ok and start processor.

You have successfull configured Nifi DataLake Platform for HDFS Encryption.

	
